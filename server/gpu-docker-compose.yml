version: '3.8'

services:
  web-daw:
    build: .
    container_name: web_daw_container
    ports:
      - "3001:3001"  # í˜¸ìŠ¤íŠ¸í¬íŠ¸:ì»¨í…Œì´ë„ˆí¬íŠ¸
    volumes:
      # ë¡œì»¬ì˜ uploadsì™€ output í´ë”ë¥¼ ì»¨í…Œì´ë„ˆì™€ ë™ê¸°í™”
      - ./uploads:/app/uploads
      - ./output:/app/output
    environment:
      - NODE_ENV=production
    restart: always

    # ğŸ”¥ [GPU ì„¤ì • ì¶”ê°€] ì´ ë¶€ë¶„ì´ í•µì‹¬ì…ë‹ˆë‹¤!
    # NVIDIA GPUë¥¼ ì»¨í…Œì´ë„ˆì— íŒ¨ìŠ¤ìŠ¤ë£¨í•©ë‹ˆë‹¤.
    deploy:
      resources:
        reservations:
          devices:
            - driver: nvidia
              count: 1       # ì‚¬ìš© ê°€ëŠ¥í•œ ì²« ë²ˆì§¸ GPU ì‚¬ìš© (ëª¨ë‘ ì“°ë ¤ë©´ 'all')
              capabilities: [gpu]